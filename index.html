<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banco Juvenil</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="card">
            <h1 class="text-4xl font-bold text-center text-gray-800 mb-8">Banco Juvenil</h1>

            <div class="flex justify-center mb-6 bg-blue-50 rounded-xl p-1">
                <button id="loginTab" class="tab-button active">Iniciar Sesi√≥n</button>
                <button id="registerTab" class="tab-button">Registrarse</button>
            </div>

            <!-- Login Form -->
            <div id="loginSection">
                <p class="text-center text-gray-600 mb-6 text-lg">¬°Bienvenido de nuevo, campe√≥n!</p>
                <form id="loginForm" class="space-y-5">
                    <div>
                        <label for="loginIdentifier" class="block text-gray-700 text-sm font-semibold mb-2">ID de Usuario (Email o ID √∫nico)</label>
                        <input type="text" id="loginIdentifier" class="input-field" placeholder="ej. JU#1234 o tu email" required>
                    </div>
                    <div>
                        <label for="loginPassword" class="block text-gray-700 text-sm font-semibold mb-2">Contrase√±a</label>
                        <input type="password" id="loginPassword" class="input-field" placeholder="********" required>
                    </div>
                    <button type="submit" class="btn-primary w-full">Iniciar Sesi√≥n</button>
                </form>
            </div>

            <!-- Registration Form -->
            <div id="registerSection" class="hidden">
                <p class="text-center text-gray-600 mb-6 text-lg">¬°√önete a la familia del Banco Juvenil!</p>
                <form id="registerForm" class="space-y-5">
                    <div>
                        <label for="registerName" class="block text-gray-700 text-sm font-semibold mb-2">Nombre</label>
                        <input type="text" id="registerName" class="input-field" placeholder="Juan" required>
                    </div>
                    <div>
                        <label for="registerSurname" class="block text-gray-700 text-sm font-semibold mb-2">Apellido</label>
                        <input type="text" id="registerSurname" class="input-field" placeholder="P√©rez" required>
                    </div>
                    <div>
                        <label for="registerAge" class="block text-gray-700 text-sm font-semibold mb-2">Edad</label>
                        <input type="number" id="registerAge" class="input-field" placeholder="18" min="0" required>
                    </div>
                    <div>
                        <label for="registerPhoneNumber" class="block text-gray-700 text-sm font-semibold mb-2">N√∫mero de Tel√©fono (para avisos de ahorro)</label>
                        <input type="tel" id="registerPhoneNumber" class="input-field" placeholder="Ej: 8091234567" pattern="[0-9]{10}" title="N√∫mero de tel√©fono de 10 d√≠gitos" required>
                    </div>
                    <div>
                        <label for="registerPassword" class="block text-gray-700 text-sm font-semibold mb-2">Contrase√±a</label>
                        <input type="password" id="registerPassword" class="input-field" placeholder="********" required>
                    </div>
                    <button type="submit" class="btn-primary w-full">Registrarse</button>
                </form>
            </div>

            <!-- Message Box -->
            <div id="messageBox" class="mt-6 p-4 rounded-lg text-sm hidden" role="alert">
                <p id="messageText"></p>
                <button id="closeMessage" class="float-right text-gray-600 hover:text-gray-900 font-bold ml-4">&times;</button>
            </div>

            <!-- User Dashboard (Hidden initially) -->
            <div id="dashboardSection" class="hidden mt-8 text-center">
                <div class="flex items-center justify-center mb-4">
                    <div class="w-16 h-16 bg-blue-200 rounded-full flex items-center justify-center text-blue-800 text-3xl font-bold mr-4">
                        <span id="profileAvatar">U</span>
                    </div>
                    <div>
                        <h2 class="text-3xl font-semibold text-gray-800">Bienvenido, <span id="dashboardUserName"></span>!</h2>
                        <p class="text-lg text-gray-700">Tu ID de Usuario: <span id="dashboardDisplayId" class="font-mono bg-gray-100 p-2 rounded-md text-sm"></span></p>
                    </div>
                </div>

                <div class="mt-6 p-6 bg-blue-100 border border-blue-300 rounded-xl text-blue-800">
                    <h3 class="text-xl font-bold mb-2">Saldo Actual:</h3>
                    <p id="accountBalance" class="text-4xl font-extrabold text-blue-700">$0.00 USD</p>
                    <button id="toggleCurrency" class="mt-3 text-blue-600 hover:underline text-sm">Cambiar a DOP</button>
                </div>
                <div class="mt-8 space-y-4">
                    <button id="transferMoneyBtn" class="btn-primary w-full">Transferir Dinero</button>
                    <button id="depositMoneyBtn" class="btn-primary w-full">Depositar Dinero</button>
                    <button id="withdrawMoneyBtn" class="btn-primary w-full">Retirar Dinero</button>
                    <button id="viewHistoryBtn" class="btn-primary w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800">Ver Historial de Movimientos</button>

                    <!-- User-specific Pending Requests Button -->
                    <button id="viewUserPendingRequestsBtn" class="btn-primary w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800">Ver Mis Solicitudes Pendientes</button>

                    <!-- Online Shopping Button -->
                    <button id="onlineShoppingBtn" class="btn-primary w-full bg-gradient-to-r from-teal-600 to-teal-700 hover:from-teal-700 hover:to-teal-800">Comprar por Internet</button>
                    <!-- Streaming Service Button -->
                    <button id="streamingPaymentBtn" class="btn-primary w-full bg-gradient-to-r from-pink-600 to-pink-700 hover:from-pink-700 hover:to-pink-800">Pagar Servicio de Streaming</button>

                    <!-- NEW: Open Savings Account Button -->
                    <button id="openSavingsAccountBtn" class="btn-primary w-full bg-gradient-to-r from-lime-600 to-lime-700 hover:from-lime-700 hover:to-lime-800">Abrir Cuenta de Ahorro üí∞</button>
                    <!-- NEW: View Savings Accounts Button -->
                    <button id="viewSavingsAccountsBtn" class="btn-primary w-full bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800">Ver Mis Cuentas de Ahorro üìà</button>


                    <!-- Edit Profile Button -->
                    <button id="editProfileBtn" class="btn-primary w-full bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800">Editar Perfil</button>
                    <!-- NEW: Change Password Button -->
                    <button id="changePasswordBtn" class="btn-primary w-full bg-gradient-to-r from-blue-700 to-blue-800 hover:from-blue-800 hover:to-blue-900">Cambiar Contrase√±a</button>
                    <!-- NEW: Security Tips Button -->
                    <button id="securityTipsBtn" class="btn-primary w-full bg-gradient-to-r from-red-700 to-red-800 hover:from-red-800 hover:to-red-900">Consejos de Seguridad</button>
                    <!-- NEW: About Us Button -->
                    <button id="aboutUsBtn" class="btn-primary w-full bg-gradient-to-r from-green-700 to-green-800 hover:from-green-800 hover:to-green-900">Acerca de Nosotros</button>
                    <!-- NEW: Contact & Support Button -->
                    <button id="contactSupportBtn" class="btn-primary w-full bg-gradient-to-r from-indigo-700 to-indigo-800 hover:from-indigo-800 hover:to-indigo-900">Contacto y Soporte</button>


                    <!-- Admin specific buttons, initially hidden -->
                    <div id="adminButtonsContainer" class="hidden space-y-4 mt-6 border-t pt-4 border-gray-200">
                        <h3 class="text-xl font-bold text-gray-700 border-b pb-2 mb-4">Funciones de Administrador</h3>
                        <button id="viewAdminPendingRequestsBtn" class="btn-primary w-full bg-gradient-to-r from-teal-800 to-teal-900 hover:from-teal-900 hover:to-teal-950">Ver Solicitudes Pendientes (Admin)</button>
                        <button id="adminFullHistoryBtn" class="btn-primary w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800">Ver Historial Completo (Admin)</button>
                        <!-- NEW: Edit Announcements Button -->
                        <button id="editAnnouncementsBtn" class="btn-primary w-full bg-gradient-to-r from-yellow-700 to-yellow-800 hover:from-yellow-800 hover:to-yellow-900">Editar Anuncios ‚úèÔ∏è</button>
                    </div>

                    <!-- FAQ button visible to all logged-in users -->
                    <button id="viewFAQBtn" class="btn-primary w-full bg-gradient-to-r from-indigo-600 to-indigo-700 hover:from-indigo-700 hover:to-indigo-800 mt-4">Ver Preguntas Frecuentes (FAQ)</button>

                    <!-- NEW: Announcements Section -->
                    <div class="mt-6 p-4 bg-yellow-100 border border-yellow-300 rounded-xl text-yellow-800 text-left">
                        <h3 class="text-xl font-bold mb-2 text-center">Anuncios Importantes üì¢</h3>
                        <ul id="announcementsList" class="list-disc list-inside space-y-1">
                            <!-- Announcements will be loaded here by JS -->
                            <li>Cargando anuncios...</li>
                        </ul>
                    </div>

                    <!-- Admin Contact info visible to all logged-in users -->
                    <p class="text-sm text-gray-600 mt-6 pt-4 border-t border-gray-200">
                        Contacto de Soporte (Admin): <a href="https://wa.me/18293329545" target="_blank" class="font-bold text-green-600 hover:underline">829-332-9545 (WhatsApp)</a>
                    </p>
                    <button id="logoutBtn" class="bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-xl shadow transition duration-200 w-full">Cerrar Sesi√≥n</button>
                </div>

                <!-- Transfer Money Modal -->
                <div id="transferModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
                    <div class="modal-content w-full max-w-sm">
                        <div class="modal-header">
                            Transferir Dinero
                            <button id="cancelTransferModalBtn" class="close-button">&times;</button>
                        </div>
                        <form id="transferForm" class="space-y-4">
                            <div>
                                <label for="transferRecipientId" class="block text-gray-700 text-sm font-semibold mb-2">ID de Destinatario (Email o ID √∫nico)</label>
                                <input type="text" id="transferRecipientId" class="input-field" placeholder="ej. MA#5678 o email@banco.com" required>
                                <p id="recipientNameDisplay" class="text-xs text-gray-500 mt-1"></p>
                            </div>
                            <div>
                                <label for="transferAmount" class="block text-gray-700 text-sm font-semibold mb-2">Monto</label>
                                <input type="number" id="transferAmount" class="input-field" placeholder="100.00" min="0.01" step="0.01" required>
                            </div>
                            <div>
                                <label for="transferCurrency" class="block text-gray-700 text-sm font-semibold mb-2">Moneda</label>
                                <select id="transferCurrency" class="input-field">
                                    <option value="USD">D√≥lar (USD)</option>
                                    <option value="DOP">Peso Dominicano (DOP)</option>
                                </select>
                            </div>
                            <div class="flex justify-end space-x-4 pt-4">
                                <button type="submit" id="confirmTransferBtn" class="btn-primary" disabled>Confirmar Transferencia</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Deposit Money Modal -->
                <div id="depositModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
                    <div class="modal-content w-full max-w-sm">
                        <div class="modal-header">
                            Depositar Dinero
                            <button id="cancelDeposit" class="close-button">&times;</button>
                        </div>
                        <form id="depositForm" class="space-y-4">
                            <div>
                                <label for="depositSerialNumber" class="block text-gray-700 text-sm font-semibold mb-2">N√∫mero de Serie √önico (Generado)</label>
                                <input type="text" id="depositSerialNumber" class="input-field" readonly>
                            </div>
                            <div>
                                <label for="depositAmount" class="block text-gray-700 text-sm font-semibold mb-2">Monto</label>
                                <input type="number" id="depositAmount" class="input-field" placeholder="Ej: 500.00" min="0.01" step="0.01" required>
                            </div>
                            <div>
                                <label for="depositCurrency" class="block text-gray-700 text-sm font-semibold mb-2">Moneda</label>
                                <select id="depositCurrency" class="input-field">
                                    <option value="USD">D√≥lar (USD)</option>
                                    <option value="DOP">Peso Dominicano (DOP)</option>
                                </select>
                            </div>
                            <div class="flex justify-end space-x-4 pt-4">
                                <button type="submit" class="btn-primary">Solicitar Dep√≥sito</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Withdraw Money Modal -->
                <div id="withdrawModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
                    <div class="modal-content w-full max-w-sm">
                        <div class="modal-header">
                            Retirar Dinero
                            <button id="cancelWithdraw" class="close-button">&times;</button>
                        </div>
                        <form id="withdrawForm" class="space-y-4">
                            <div>
                                <label for="withdrawAmount" class="block text-gray-700 text-sm font-semibold mb-2">Monto</label>
                                <input type="number" id="withdrawAmount" class="input-field" placeholder="Ej: 200.00" min="0.01" step="0.01" required>
                            </div>
                            <div>
                                <label for="withdrawCurrency" class="block text-gray-700 text-sm font-semibold mb-2">Moneda</label>
                                <select id="withdrawCurrency" class="input-field">
                                    <option value="USD">D√≥lar (USD)</option>
                                    <option value="DOP">Peso Dominicano (DOP)</option>
                                </select>
                            </div>
                            <p class="text-sm text-gray-600 mt-2">Se aplicar√° una tarifa del 4% a este retiro.</p>
                            <div class="flex justify-end space-x-4 pt-4">
                                <button type="submit" class="btn-primary">Solicitar Retiro</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- User History Modal -->
                <div id="userHistoryModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
                    <div class="modal-content">
                        <div class="modal-header">
                            Mi Historial de Movimientos
                            <button id="closeUserHistoryModalBtn" class="close-button">&times;</button>
                        </div>
                        <div class="table-container bg-white shadow">
                            <table class="min-w-full">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Tipo</th>
                                        <th>Detalle</th>
                                        <th>Monto</th>
                                        <th>Moneda</th>
                                        <th>Recibo</th>
                                    </tr>
                                </thead>
                                <tbody id="userHistoryTableBody">
                                    <tr><td colspan="6" class="text-center text-gray-500 py-4">Cargando historial...</td></tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="flex justify-end items-center mt-6">
                        </div>
                    </div>
                </div>

                <!-- Transfer/Deposit/Withdrawal Status Message (for 10-second transfers or pending deposits) -->
                <div id="transactionStatusMsg" class="mt-6 p-4 rounded-lg text-sm hidden bg-yellow-100 border border-yellow-200 text-yellow-800" role="status">
                    <p id="transactionStatusText"></p>
                    <button id="cancelOngoingTransferBtn" class="mt-2 btn-secondary hidden">Cancelar Transferencia</button>
                </div>

            </div>
        </div>
    </div>

    <!-- Admin Full History Modal -->
    <div id="adminFullHistoryModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
        <div class="modal-content">
            <div class="modal-header">
                Historial Completo de Transacciones (Admin)
                <button id="closeAdminFullHistoryModalBtn" class="close-button">&times;</button>
            </div>
            <div class="table-container bg-white shadow">
                <table class="min-w-full">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Tipo</th>
                            <th>Usuario (Remitente/Receptor)</th>
                            <th>Monto</th>
                            <th>Moneda</th>
                            <th>Estado</th>
                            <th>Detalles</th>
                        </tr>
                    </thead>
                    <tbody id="adminFullHistoryTableBodyModal">
                        <tr><td colspan="7" class="text-center text-gray-500 py-4">Cargando historial completo...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Admin Pending Requests Modal (Unified) -->
    <div id="adminPendingRequestsModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
        <div class="modal-content">
            <div class="modal-header">
                Solicitudes Pendientes (Admin)
                <button id="closeAdminPendingRequestsModalBtn" class="close-button">&times;</button>
            </div>
            <div class="table-container bg-white shadow">
                <table class="min-w-full">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Tipo</th>
                            <th>Usuario</th>
                            <th>Monto</th>
                            <th>Moneda</th>
                            <th>Detalles</th>
                            <th>Acci√≥n</th>
                        </tr>
                    </thead>
                    <tbody id="adminPendingRequestsTableBody">
                        <tr><td colspan="7" class="text-center text-gray-500 py-4">No hay solicitudes pendientes.</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- FAQ Modal -->
    <div id="faqModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
        <div class="modal-content">
            <div class="modal-header">
                Preguntas Frecuentes (FAQ)
                <button id="closeFAQModalBtn" class="close-button">&times;</button>
            </div>
            <div class="text-left text-gray-700 space-y-4">
                <div>
                    <h4 class="font-semibold text-lg text-gray-800 mb-1">¬øC√≥mo puedo registrarme?</h4>
                    <p class="text-sm">Para registrarte, ve a la pesta√±a "Registrarse" y completa tus datos. Se te asignar√° un ID de usuario √∫nico.</p>
                </div>
                <div>
                    <h4 class="font-semibold text-lg text-gray-800 mb-1">¬øQu√© monedas puedo usar?</h4>
                    <p class="text-sm">Actualmente, el Banco Juvenil maneja D√≥lares (USD) y Pesos Dominicanos (DOP). Puedes ver y cambiar tu preferencia de moneda en tu dashboard.</p>
                </div>
                <div>
                    <h4 class="font-semibold text-lg text-gray-800 mb-1">¬øCu√°nto tiempo tardan las transferencias?</h4>
                    <p class="text-sm">Las transferencias entre cuentas toman aproximadamente 10 segundos en procesarse. Una vez iniciada, no se puede cancelar.</p>
                </div>
                <div>
                    <h4 class="font-semibold text-lg text-gray-800 mb-1">¬øC√≥mo funciona el dep√≥sito de dinero?</h4>
                    <p class="text-sm">Para depositar dinero, solicitas un dep√≥sito con un n√∫mero de serie √∫nico. Esta solicitud debe ser aprobada por un administrador del banco antes de que el dinero se refleje en tu cuenta.</p>
                </div>
                <div>
                    <h4 class="font-semibold text-lg text-gray-800 mb-1">¬øHay alguna tarifa por retiro?</h4>
                    <p class="text-sm">S√≠, se aplica una tarifa del 4% a todas las solicitudes de retiro para cubrir los costos de procesamiento.</p>
                </div>
                <div>
                    <h4 class="font-semibold text-lg text-gray-800 mb-1">¬øC√≥mo funciona la compra por internet?</h4>
                    <p class="text-sm">Puedes solicitar la compra de productos de tiendas como Shein, Alibaba, AliExpress o Temu. Proporciona el monto estimado y los enlaces de los productos. Se te cobrar√° una tarifa del 3% sobre el total. **Tu solicitud ser√° revisada y confirmada por el administrador antes de que se deduzca el dinero de tu cuenta.**</p>
                </div>
                <div>
                    <h4 class="font-semibold text-lg text-gray-800 mb-1">¬øC√≥mo puedo pagar servicios de streaming?</h4>
                    <p class="text-sm">Puedes pagar tus suscripciones a servicios como Netflix, Disney+, Spotify, etc. Introduce el nombre del servicio, tu usuario/email de cuenta y el monto. Se aplicar√° una tarifa del 3%. **Tu solicitud ser√° revisada y confirmada por el administrador antes de que se deduzca el dinero de tu cuenta.**</p>
                </div>
                <div>
                    <h4 class="font-semibold text-lg text-gray-800 mb-1">¬øPuedo ver mis solicitudes de dep√≥sito y retiro pendientes?</h4>
                    <p class="text-sm">S√≠, en tu dashboard puedes hacer clic en "Ver Mis Solicitudes Pendientes" para revisar el estado de todas tus solicitudes (dep√≥sitos, retiros, compras y pagos de streaming) que a√∫n no han sido procesadas por el administrador.</p>
                </div>
                <div>
                    <h4 class="font-semibold text-lg text-gray-800 mb-1">¬øC√≥mo abro una cuenta de ahorro?</h4>
                    <p class="text-sm">Puedes solicitar una cuenta de ahorro desde tu panel. Deber√°s especificar tu objetivo de ahorro, un monto de dep√≥sito inicial y una fecha de finalizaci√≥n. Una vez aprobada por el administrador, se crear√° tu cuenta de ahorro.</p>
                </div>
                <div>
                    <h4 class="font-semibold text-lg text-gray-800 mb-1">¬øHay alguna tarifa por cerrar una cuenta de ahorro?</h4>
                    <p class="text-sm">S√≠, al eliminar una cuenta de ahorro, se aplica una tarifa del 2% sobre el saldo restante. El resto del dinero se transferir√° a tu cuenta principal.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Online Shopping Modal -->
    <div id="onlineShoppingModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
        <div class="modal-content w-full max-w-lg">
            <div class="modal-header">
                Compra por Internet
                <button id="cancelOnlineShopping" class="close-button">&times;</button>
            </div>
            <form id="onlineShoppingForm" class="space-y-4">
                <div>
                    <label for="shoppingAmount" class="block text-gray-700 text-sm font-semibold mb-2">Monto total estimado de los productos (sin incluir env√≠o/impuestos)</label>
                    <input type="number" id="shoppingAmount" class="input-field" placeholder="Ej: 50.00" min="0.01" step="0.01" required>
                </div>
                <div>
                    <label for="shoppingCurrency" class="block text-gray-700 text-sm font-semibold mb-2">Moneda</label>
                    <select id="shoppingCurrency" class="input-field">
                        <option value="USD">D√≥lar (USD)</option>
                        <option value="DOP">Peso Dominicano (DOP)</option>
                    </select>
                </div>
                <div>
                    <label for="productLinks" class="block text-gray-700 text-sm font-semibold mb-2">Pegue aqu√≠ los enlaces de los productos (uno por l√≠nea)</label>
                    <textarea id="productLinks" class="input-field h-32" placeholder="https://www.shein.com/item1&#10;https://www.aliexpress.com/item2" required></textarea>
                </div>
                <div>
                    <label for="shoppingCategory" class="block text-gray-700 text-sm font-semibold mb-2">Categor√≠a de la Compra</label>
                    <select id="shoppingCategory" class="input-field" required>
                        <option value="">Seleccione una categor√≠a</option>
                        <option value="Ropa y Accesorios">Ropa y Accesorios</option>
                        <option value="Electr√≥nica">Electr√≥nica</option>
                        <option value="Libros y Papeler√≠a">Libros y Papeler√≠a</option>
                        <option value="Juguetes y Juegos">Juguetes y Juegos</option>
                        <option value="Hogar y Decoraci√≥n">Hogar y Decoraci√≥n</option>
                        <option value="Deportes">Deportes</option>
                        <option value="Belleza y Cuidado Personal">Belleza y Cuidado Personal</option>
                        <option value="Otros">Otros</option>
                    </select>
                </div>
                <div class="text-right text-sm text-gray-600">
                    <p>Tarifa (3%): <span id="shoppingFeeDisplay">$0.00 USD</span></p>
                    <p class="font-bold text-base text-gray-800">Total Solicitado: <span id="shoppingTotalDisplay">$0.00 USD</span></p>
                    <p class="text-xs text-red-500 mt-1">Este monto ser√° deducido de tu cuenta S√ìLO despu√©s de la aprobaci√≥n del administrador.</p>
                </div>
                <div class="flex justify-end space-x-4 pt-4">
                    <button type="submit" id="requestOnlineShopping" class="btn-primary">Enviar Solicitud de Compra</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Streaming Payment Modal -->
    <div id="streamingPaymentModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
        <div class="modal-content w-full max-w-sm">
            <div class="modal-header">
                Pagar Servicio de Streaming
                <button id="cancelStreamingPayment" class="close-button">&times;</button>
            </div>
            <form id="streamingPaymentForm" class="space-y-4">
                <div>
                    <label for="streamingService" class="block text-gray-700 text-sm font-semibold mb-2">Servicio de Streaming</label>
                    <select id="streamingService" class="input-field" required>
                        <option value="">Seleccione un servicio</option>
                        <option value="Netflix">Netflix</option>
                        <option value="Disney+">Disney+</option>
                        <option value="Spotify">Spotify</option>
                        <option value="Amazon Prime Video">Amazon Prime Video</option>
                        <option value="YouTube Premium">YouTube Premium</option>
                        <option value="HBO Max">HBO Max</option>
                        <option value="Otros">Otros</option>
                    </select>
                </div>
                <div>
                    <label for="streamingAccountIdentifier" class="block text-gray-700 text-sm font-semibold mb-2">Email o Usuario de la Cuenta</label>
                    <input type="text" id="streamingAccountIdentifier" class="input-field" placeholder="tu_email@ejemplo.com o tu_usuario" required>
                </div>
                <div>
                    <label for="streamingAmount" class="block text-gray-700 text-sm font-semibold mb-2">Monto de la Suscripci√≥n</label>
                    <input type="number" id="streamingAmount" class="input-field" placeholder="Ej: 15.99" min="0.01" step="0.01" required>
                </div>
                <div>
                    <label for="streamingCurrency" class="block text-gray-700 text-sm font-semibold mb-2">Moneda</label>
                    <select id="streamingCurrency" class="input-field">
                        <option value="USD">D√≥lar (USD)</option>
                        <option value="DOP">Peso Dominicano (DOP)</option>
                    </select>
                </div>
                <div>
                    <label for="streamingCategory" class="block text-gray-700 text-sm font-semibold mb-2">Categor√≠a del Servicio</label>
                    <select id="streamingCategory" class="input-field" required>
                        <option value="">Seleccione una categor√≠a</option>
                        <option value="Entretenimiento">Entretenimiento</option>
                        <option value="M√∫sica">M√∫sica</option>
                        <option value="Educaci√≥n">Educaci√≥n</option>
                        <option value="Noticias">Noticias</option>
                        <option value="Productividad">Productividad</option>
                        <option value="Otros">Otros</option>
                    </select>
                </div>
                <div class="text-right text-sm text-gray-600">
                    <p>Tarifa (3%): <span id="streamingFeeDisplay">$0.00 USD</span></p>
                    <p class="font-bold text-base text-gray-800">Total Solicitado: <span id="streamingTotalDisplay">$0.00 USD</span></p>
                    <p class="text-xs text-red-500 mt-1">Este monto ser√° deducido de tu cuenta S√ìLO despu√©s de la aprobaci√≥n del administrador.</p>
                </div>
                <div class="flex justify-end space-x-4 pt-4">
                    <button type="submit" id="requestStreamingPayment" class="btn-primary">Enviar Solicitud de Pago</button>
                </div>
            </form>
        </div>
    </div>

    <!-- User Pending Requests Modal -->
    <div id="userPendingRequestsModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
        <div class="modal-content">
            <div class="modal-header">
                Mis Solicitudes Pendientes
                <button id="closeUserPendingRequestsModalBtn" class="close-button">&times;</button>
            </div>
            <div class="table-container bg-white shadow">
                <table class="min-w-full">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Tipo</th>
                            <th>Monto</th>
                            <th>Moneda</th>
                            <th>Estado</th>
                            <th>Detalle</th>
                        </tr>
                    </thead>
                    <tbody id="userPendingRequestsTableBody">
                        <tr><td colspan="6" class="text-center text-gray-500 py-4">Cargando solicitudes pendientes...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Receipt/Invoice Modal for Users -->
    <div id="receiptModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
        <div class="modal-content w-full max-w-md">
            <div class="modal-header">
                Recibo de Transacci√≥n
                <button id="closeReceiptModalBtn" class="close-button">&times;</button>
            </div>
            <div id="receiptContent" class="text-left text-gray-700 space-y-2 text-sm bg-gray-50 p-4 rounded-lg">
                <!-- Receipt details will be inserted here by JS -->
            </div>
        </div>
    </div>


    <!-- Rules Consent Modal -->
    <div id="rulesConsentModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
        <div class="modal-content w-full max-w-md">
            <div class="modal-header">
                Reglas del Banco Juvenil
                <button id="rejectRulesBtn" class="close-button">&times;</button>
            </div>
            <div id="briefRulesTextContainer" class="max-h-60 overflow-y-auto text-gray-700 text-sm mb-6 p-4 border rounded-lg bg-gray-50">
                <!-- Brief rules will be inserted here by JS -->
            </div>
            <div class="flex justify-end space-x-4 pt-4">
                <button type="button" id="acceptRulesBtn" class="btn-primary">Aceptar Reglas</button>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div id="editProfileModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
        <div class="modal-content w-full max-w-sm">
            <div class="modal-header">
                Editar Perfil
                <button id="cancelEditProfileBtn" class="close-button">&times;</button>
            </div>
            <form id="editProfileForm" class="space-y-4">
                <div>
                    <label for="editName" class="block text-gray-700 text-sm font-semibold mb-2">Nombre</label>
                    <input type="text" id="editName" class="input-field" required>
                </div>
                <div>
                    <label for="editSurname" class="block text-gray-700 text-sm font-semibold mb-2">Apellido</label>
                    <input type="text" id="editSurname" class="input-field" required>
                </div>
                <div>
                    <label for="editAge" class="block text-gray-700 text-sm font-semibold mb-2">Edad</label>
                    <input type="number" id="editAge" class="input-field" min="0" required>
                </div>
                <div>
                    <label for="editPhoneNumber" class="block text-gray-700 text-sm font-semibold mb-2">N√∫mero de Tel√©fono</label>
                    <input type="tel" id="editPhoneNumber" class="input-field" placeholder="Ej: 8091234567" pattern="[0-9]{10}" title="N√∫mero de tel√©fono de 10 d√≠gitos">
                </div>
                <div class="flex justify-end space-x-4 pt-4">
                    <button type="submit" class="btn-primary">Guardar Cambios</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div id="changePasswordModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
        <div class="modal-content w-full max-w-sm">
            <div class="modal-header">
                Cambiar Contrase√±a
                <button id="cancelChangePasswordBtn" class="close-button">&times;</button>
            </div>
            <form id="changePasswordForm" class="space-y-4">
                <div>
                    <label for="currentPassword" class="block text-gray-700 text-sm font-semibold mb-2">Contrase√±a Actual</label>
                    <input type="password" id="currentPassword" class="input-field" placeholder="********" required>
                </div>
                <div>
                    <label for="newPassword" class="block text-gray-700 text-sm font-semibold mb-2">Nueva Contrase√±a</label>
                    <input type="password" id="newPassword" class="input-field" placeholder="********" required>
                </div>
                <div>
                    <label for="confirmNewPassword" class="block text-gray-700 text-sm font-semibold mb-2">Confirmar Nueva Contrase√±a</label>
                    <input type="password" id="confirmNewPassword" class="input-field" placeholder="********" required>
                </div>
                <div class="flex justify-end space-x-4 pt-4">
                    <button type="submit" class="btn-primary">Cambiar Contrase√±a</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Security Tips Modal -->
    <div id="securityTipsModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
        <div class="modal-content">
            <div class="modal-header">
                Consejos de Seguridad üîí
                <button id="closeSecurityTipsBtn" class="close-button">&times;</button>
            </div>
            <div class="text-left text-gray-700 space-y-4">
                <div>
                    <h4 class="font-semibold text-lg text-gray-800 mb-1">1. Contrase√±as Fuertes y √önicas</h4>
                    <p class="text-sm">Usa contrase√±as largas y complejas que combinen letras may√∫sculas, min√∫sculas, n√∫meros y s√≠mbolos. ¬°Y lo m√°s importante, no las uses en otros sitios!</p>
                </div>
                <div>
                    <h4 class="font-semibold text-lg text-gray-800 mb-1">2. Cuidado con el Phishing</h4>
                    <p class="text-sm">Nunca hagas clic en enlaces sospechosos ni descargues archivos de correos electr√≥nicos o mensajes de texto no solicitados, incluso si parecen ser de un banco. Siempre verifica la fuente.</p>
                </div>
                <div>
                    <h4 class="font-semibold text-lg text-gray-800 mb-1">3. Protege tu Informaci√≥n Personal</h4>
                    <p class="text-sm">No compartas tu ID de usuario, contrase√±a, n√∫meros de cuenta o informaci√≥n personal por tel√©fono, correo electr√≥nico o redes sociales, a menos que est√©s seguro de la identidad del receptor.</p>
                </div>
                <div>
                    <h4 class="font-semibold text-lg text-gray-800 mb-1">4. Revisa tus Movimientos Regularmente</h4>
                    <p class="text-sm">Accede a tu historial de movimientos con frecuencia para detectar cualquier actividad sospechosa o no autorizada. Si ves algo raro, ¬°cont√°ctanos de inmediato!</p>
                </div>
                <div>
                    <h4 class="font-semibold text-lg text-800 mb-1">5. Mant√©n tu Dispositivo Seguro</h4>
                    <p class="text-sm">Usa antivirus, mant√©n tu sistema operativo y aplicaciones actualizadas, y evita conectarte a redes Wi-Fi p√∫blicas no seguras para realizar transacciones bancarias.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- About Us Modal -->
    <div id="aboutUsModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
        <div class="modal-content w-full max-w-lg">
            <div class="modal-header">
                Acerca del Banco Juvenil üè¶
                <button id="closeAboutUsBtn" class="close-button">&times;</button>
            </div>
            <div class="text-left text-gray-700 space-y-4">
                <p>¬°Hola, futuro financiero! Somos el Banco Juvenil, una plataforma creada pensando en ti.</p>
                <p>Nuestra misi√≥n es empoderar a los j√≥venes como t√∫ para que tomen el control de sus finanzas desde temprana edad. Creemos que aprender sobre dinero no tiene por qu√© ser aburrido, ¬°sino una aventura emocionante!</p>
                <p>Aqu√≠ podr√°s:</p>
                <ul class="list-disc list-inside ml-4 space-y-1">
                    <li>Gestionar tus ahorros y gastos de forma sencilla.</li>
                    <li>Establecer metas de ahorro y ver tu progreso.</li>
                    <li>Realizar transferencias y pagos de forma segura (con la supervisi√≥n de un administrador, claro).</li>
                    <li>¬°Y mucho m√°s, todo dise√±ado para ser f√°cil y divertido!</li>
                </ul>
                <p>Estamos comprometidos con tu educaci√≥n financiera y tu seguridad. ¬°Gracias por elegirnos como tu compa√±ero en este viaje!</p>
                <p class="text-sm text-gray-600 mt-4">Fundado en 2025. Versi√≥n 1.0.</p>
            </div>
        </div>
    </div>

    <!-- NEW: Contact & Support Modal -->
    <div id="contactSupportModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
        <div class="modal-content w-full max-w-md">
            <div class="modal-header">
                Contacto y Soporte üìû
                <button id="closeContactSupportBtn" class="close-button">&times;</button>
            </div>
            <div class="text-left text-gray-700 space-y-4">
                <p>¬øNecesitas ayuda o tienes alguna pregunta? ¬°Estamos aqu√≠ para ti, campe√≥n!</p>
                <div>
                    <h4 class="font-semibold text-lg text-gray-800 mb-1">WhatsApp de Soporte:</h4>
                    <p class="text-sm"><a href="https://wa.me/18293329545" target="_blank" class="text-green-600 hover:underline font-bold">829-332-9545</a></p>
                </div>
                <div>
                    <h4 class="font-semibold text-lg text-gray-800 mb-1">Correo Electr√≥nico:</h4>
                    <p class="text-sm"><a href="mailto:soportebancojuvenil@gmail.com" class="text-blue-600 hover:underline">soportebancojuvenil@gmail.com</a></p>
                </div>
                <div>
                    <h4 class="font-semibold text-lg text-gray-800 mb-1">Horario de Atenci√≥n:</h4>
                    <p class="text-sm">Lunes a Viernes: 9:00 AM - 5:00 PM (Hora local)</p>
                </div>
                <p class="text-sm text-gray-600 mt-4">¬°No dudes en contactarnos! Tu seguridad y tranquilidad son nuestra prioridad.</p>
            </div>
        </div>
    </div>

    <!-- NEW: Open Savings Account Modal -->
    <div id="openSavingsAccountModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
        <div class="modal-content w-full max-w-sm">
            <div class="modal-header">
                Abrir Cuenta de Ahorro üí∞
                <button id="cancelOpenSavingsAccountBtn" class="close-button">&times;</button>
            </div>
            <form id="savingsAccountForm" class="space-y-4">
                <div class="bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 mb-4" role="alert">
                    <p class="font-bold">Aviso Importante:</p>
                    <p class="text-sm">Al eliminar una cuenta de ahorro, se aplicar√° una tarifa del 2% sobre el saldo restante. El resto del dinero se transferir√° a tu cuenta principal.</p>
                </div>
                <div>
                    <label for="savingsGoal" class="block text-gray-700 text-sm font-semibold mb-2">¬øPara qu√© est√°s ahorrando?</label>
                    <input type="text" id="savingsGoal" class="input-field" placeholder="Ej: Viaje a la playa, Consola de videojuegos" required>
                </div>
                <div>
                    <label for="initialDepositAmount" class="block text-gray-700 text-sm font-semibold mb-2">Monto de Dep√≥sito Inicial</label>
                    <input type="number" id="initialDepositAmount" class="input-field" placeholder="Ej: 50.00" min="0.01" step="0.01" required>
                </div>
                <div>
                    <label for="initialDepositCurrency" class="block text-gray-700 text-sm font-semibold mb-2">Moneda del Dep√≥sito Inicial</label>
                    <select id="initialDepositCurrency" class="input-field">
                        <option value="USD">D√≥lar (USD)</option>
                        <option value="DOP">Peso Dominicano (DOP)</option>
                    </select>
                </div>
                <div>
                    <label for="preferredSavingsFrequency" class="block text-gray-700 text-sm font-semibold mb-2">Frecuencia de Ahorro Preferida</label>
                    <select id="preferredSavingsFrequency" class="input-field" required>
                        <option value="">Selecciona una frecuencia</option>
                        <option value="Semanal">Semanal</option>
                        <option value="Quincenal">Quincenal</option>
                        <option value="Mensual">Mensual</option>
                        <option value="Ocasional">Ocasional</option>
                    </select>
                </div>
                <div>
                    <label for="savingsEndDate" class="block text-gray-700 text-sm font-semibold mb-2">Fecha de Finalizaci√≥n del Ahorro</label>
                    <input type="date" id="savingsEndDate" class="input-field" required>
                </div>
                <div class="flex justify-end space-x-4 pt-4">
                    <button type="submit" class="btn-primary">Solicitar Cuenta de Ahorro</button>
                </div>
            </form>
        </div>
    </div>

    <!-- NEW: View Savings Accounts Modal -->
    <div id="viewSavingsAccountsModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
        <div class="modal-content">
            <div class="modal-header">
                Mis Cuentas de Ahorro üìà
                <button id="closeViewSavingsAccountsBtn" class="close-button">&times;</button>
            </div>
            <div class="table-container bg-white shadow">
                <table class="min-w-full">
                    <thead>
                        <tr>
                            <th>ID Cuenta</th>
                            <th>Objetivo</th>
                            <th>Saldo (USD)</th>
                            <th>Saldo (DOP)</th>
                            <th>Frecuencia</th>
                            <th>Inicio</th>
                            <th>Fin</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="savingsAccountsTableBody">
                        <tr><td colspan="9" class="text-center text-gray-500 py-4">Cargando cuentas de ahorro...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- NEW: Edit Announcements Modal -->
    <div id="editAnnouncementsModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
        <div class="modal-content w-full max-w-lg">
            <div class="modal-header">
                Editar Anuncios ‚úèÔ∏è
                <button id="cancelEditAnnouncementsBtn" class="close-button">&times;</button>
            </div>
            <form id="editAnnouncementsForm" class="space-y-4">
                <div>
                    <label for="announcementsTextarea" class="block text-gray-700 text-sm font-semibold mb-2">Contenido de los Anuncios (una l√≠nea por anuncio)</label>
                    <textarea id="announcementsTextarea" class="input-field h-40" placeholder="Escribe cada anuncio en una nueva l√≠nea..."></textarea>
                </div>
                <div class="flex justify-end space-x-4 pt-4">
                    <button type="submit" class="btn-primary">Guardar Anuncios</button>
                </div>
            </form>
        </div>
    </div>

    <!-- NEW: Deposit to Savings Modal -->
    <div id="depositToSavingsModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
        <div class="modal-content w-full max-w-sm">
            <div class="modal-header">
                Depositar a Cuenta de Ahorro
                <button id="cancelDepositToSavingsBtn" class="close-button">&times;</button>
            </div>
            <form id="depositToSavingsForm" class="space-y-4">
                <p class="text-sm text-gray-700">Cuenta de Ahorro: <span id="depositToSavingsAccountIdDisplay" class="font-bold"></span></p>
                <div>
                    <label for="depositToSavingsAmount" class="block text-gray-700 text-sm font-semibold mb-2">Monto a Depositar</label>
                    <input type="number" id="depositToSavingsAmount" class="input-field" placeholder="Ej: 20.00" min="0.01" step="0.01" required>
                </div>
                <div>
                    <label for="depositToSavingsCurrency" class="block text-gray-700 text-sm font-semibold mb-2">Moneda</label>
                    <select id="depositToSavingsCurrency" class="input-field">
                        <option value="USD">D√≥lar (USD)</option>
                        <option value="DOP">Peso Dominicano (DOP)</option>
                    </select>
                </div>
                <div class="flex justify-end space-x-4 pt-4">
                    <button type="submit" class="btn-primary">Confirmar Dep√≥sito</button>
                </div>
            </form>
        </div>
    </div>

    <!-- NEW: Withdraw from Savings Modal -->
    <div id="withdrawFromSavingsModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
        <div class="modal-content w-full max-w-sm">
            <div class="modal-header">
                Retirar de Cuenta de Ahorro
                <button id="cancelWithdrawFromSavingsBtn" class="close-button">&times;</button>
            </div>
            <form id="withdrawFromSavingsForm" class="space-y-4">
                <p class="text-sm text-gray-700">Cuenta de Ahorro: <span id="withdrawFromSavingsAccountIdDisplay" class="font-bold"></span></p>
                <div>
                    <label for="withdrawFromSavingsAmount" class="block text-gray-700 text-sm font-semibold mb-2">Monto a Retirar</label>
                    <input type="number" id="withdrawFromSavingsAmount" class="input-field" placeholder="Ej: 10.00" min="0.01" step="0.01" required>
                </div>
                <div>
                    <label for="withdrawFromSavingsCurrency" class="block text-gray-700 text-sm font-semibold mb-2">Moneda</label>
                    <select id="withdrawFromSavingsCurrency" class="input-field">
                        <option value="USD">D√≥lar (USD)</option>
                        <option value="DOP">Peso Dominicano (DOP)</option>
                    </select>
                </div>
                <div class="flex justify-end space-x-4 pt-4">
                    <button type="submit" class="btn-primary">Confirmar Retiro</button>
                </div>
            </form>
        </div>
    </div>

    <!-- NEW: Confirm Delete Savings Account Modal -->
    <div id="confirmDeleteSavingsAccountModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden p-4">
        <div class="modal-content w-full max-w-sm text-center">
            <div class="modal-header">
                Confirmar Eliminaci√≥n de Cuenta
                <button id="cancelDeleteSavingsAccountBtn" class="close-button">&times;</button>
            </div>
            <p class="text-lg text-gray-700 mb-4">¬øEst√°s seguro de que quieres eliminar la cuenta de ahorro "<span id="deleteSavingsAccountGoalDisplay" class="font-bold"></span>"?</p>
            <p class="text-red-600 font-semibold mb-4">Se aplicar√° una tarifa del 2% sobre el saldo actual (<span id="deleteSavingsAccountFeeDisplay"></span>).</p>
            <p class="text-gray-700 mb-6">El saldo restante (<span id="deleteSavingsAccountRemainingDisplay"></span>) se transferir√° a tu cuenta principal.</p>
            <div class="flex justify-center space-x-4">
                <button id="confirmDeleteSavingsAccountBtn" class="btn-danger">S√≠, Eliminar</button>
                <button id="cancelDeleteSavingsAccountBtn2" class="btn-secondary">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDKs and custom JavaScript -->
    <script type="module" src="script.js"></script>
</body>
</html>
