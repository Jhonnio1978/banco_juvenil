<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banco Juvenil</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom CSS */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e0f2fe; /* Light blue background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            min-height: 100vh; /* Ensure container takes full height on small screens */
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
        }
        .card {
            background-color: #ffffff;
            border-radius: 1.5rem; /* More rounded corners */
            box-shadow: 0 15px 30px -8px rgba(0, 0, 0, 0.15), 0 0px 12px -6px rgba(0, 0, 0, 0.08); /* Deeper, softer shadow */
            padding: 2rem;
            width: 100%;
            max-width: 500px; /* Max width for cards */
            margin: 1rem; /* Margin for small screens */
            box-sizing: border-box; /* Include padding in width */
        }
        .tab-button {
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            background-color: #e0f2fe; /* Light blue */
            color: #3b82f6; /* Blue text */
        }
        .tab-button.active {
            background-color: #3b82f6; /* Blue */
            color: #ffffff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .tab-button:hover:not(.active) {
            background-color: #bfdbfe; /* Lighter blue on hover */
        }
        .input-field {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
            box-sizing: border-box;
        }
        .btn-primary {
            background-color: #3b82f6;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
        }
        .btn-primary:hover {
            background-color: #2563eb;
        }
        .btn-secondary {
            background-color: #6b7280;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
        }
        .btn-secondary:hover {
            background-color: #4b5563;
        }
        .btn-success {
            background-color: #22c55e;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
        }
        .btn-success:hover {
            background-color: #16a34a;
        }
        .btn-danger {
            background-color: #ef4444;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
        }
        .btn-danger:hover {
            background-color: #dc2626;
        }
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: #ffffff;
            padding: 2rem;
            border-radius: 1.5rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 600px;
            max-height: 90vh; /* Limit modal height */
            overflow-y: auto; /* Enable scrolling for long content */
            position: relative;
        }
        .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #6b7280;
        }
        .close-btn:hover {
            color: #374151;
        }
        .message-box {
            position: fixed;
            top: 1rem;
            left: 50%;
            transform: translateX(-50%);
            padding: 1rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            z-index: 1001;
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 90%;
            max-width: 400px;
        }
        .message-box button {
            background: none;
            border: none;
            font-size: 1.25rem;
            cursor: pointer;
            color: inherit;
            margin-left: 1rem;
        }
        .transaction-status-msg {
            position: fixed;
            bottom: 1rem;
            left: 50%;
            transform: translateX(-50%);
            padding: 1rem;
            border-radius: 0.75rem;
            background-color: #fff3cd; /* Amarillo suave */
            color: #664d03; /* Amarillo oscuro */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            z-index: 1001;
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 90%;
            max-width: 400px;
        }
        .profile-avatar {
            width: 4rem;
            height: 4rem;
            background-color: #3b82f6;
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            font-weight: bold;
            margin: 0 auto 1rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .table-container {
            overflow-x: auto; /* Enable horizontal scrolling for tables on small screens */
            -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        th, td {
            padding: 0.75rem;
            border: 1px solid #e5e7eb;
            text-align: left;
            white-space: nowrap; /* Prevent text wrapping in table cells */
        }
        th {
            background-color: #f3f4f6;
            font-weight: 600;
            color: #374151;
        }
        tr:nth-child(even) {
            background-color: #f9fafb;
        }
        .btn-sm {
            padding: 0.4rem 0.8rem;
            font-size: 0.875rem;
            border-radius: 0.4rem;
        }
        /* Responsive adjustments */
        @media (min-width: 640px) {
            .card {
                margin: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <h1 class="text-3xl font-bold text-center text-blue-700 mb-6">Banco Juvenil</h1>

            <!-- Login/Register Tabs -->
            <div class="flex justify-center mb-6">
                <button id="loginTab" class="tab-button active mr-2">Iniciar Sesión</button>
                <button id="registerTab" class="tab-button">Registrarse</button>
            </div>

            <!-- Login Section -->
            <div id="loginSection" class="block">
                <form id="loginForm" class="flex flex-col">
                    <label for="loginIdentifier" class="text-gray-700 font-medium mb-1">Email o ID de Usuario:</label>
                    <input type="text" id="loginIdentifier" class="input-field" placeholder="ej. usuario@banco.com o AB#1234" required>

                    <label for="loginPassword" class="text-gray-700 font-medium mb-1">Contraseña:</label>
                    <input type="password" id="loginPassword" class="input-field" placeholder="********" required>

                    <button type="submit" class="btn-primary w-full mt-4">Iniciar Sesión</button>
                </form>
            </div>

            <!-- Register Section -->
            <div id="registerSection" class="hidden">
                <form id="registerForm" class="flex flex-col">
                    <label for="registerName" class="text-gray-700 font-medium mb-1">Nombre:</label>
                    <input type="text" id="registerName" class="input-field" placeholder="Tu nombre" required>

                    <label for="registerSurname" class="text-gray-700 font-medium mb-1">Apellido:</label>
                    <input type="text" id="registerSurname" class="input-field" placeholder="Tu apellido" required>

                    <label for="registerAge" class="text-gray-700 font-medium mb-1">Edad:</label>
                    <input type="number" id="registerAge" class="input-field" placeholder="Tu edad" required min="13">

                    <label for="registerPhoneNumber" class="text-gray-700 font-medium mb-1">Número de Teléfono (WhatsApp):</label>
                    <input type="tel" id="registerPhoneNumber" class="input-field" placeholder="ej. 18091234567" required>

                    <label for="registerPassword" class="text-gray-700 font-medium mb-1">Contraseña:</label>
                    <input type="password" id="registerPassword" class="input-field" placeholder="********" required>

                    <button type="submit" class="btn-primary w-full mt-4">Registrarse</button>
                </form>
            </div>

            <!-- Dashboard Section -->
            <div id="dashboardSection" class="hidden">
                <div class="profile-avatar" id="profileAvatar">U</div>
                <h2 class="text-2xl font-bold text-center text-blue-700 mb-2" id="dashboardUserName"></h2>
                <p class="text-center text-gray-600 mb-4" id="dashboardDisplayId"></p>

                <div class="bg-blue-100 p-4 rounded-xl mb-6 text-center">
                    <p class="text-gray-700 text-lg">Saldo Actual:</p>
                    <p class="text-3xl font-bold text-blue-800 mt-1" id="accountBalance">$0.00 USD</p>
                    <button id="toggleCurrency" class="btn-secondary btn-sm mt-3">Cambiar a DOP</button>
                </div>

                <!-- Announcements Section -->
                <div class="bg-yellow-50 p-4 rounded-xl mb-6 border border-yellow-200">
                    <h3 class="text-xl font-semibold text-yellow-800 mb-2">Anuncios Importantes</h3>
                    <ul id="announcementsList" class="list-disc list-inside text-gray-700">
                        <li>Cargando anuncios...</li>
                    </ul>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button id="depositMoneyBtn" class="btn-primary">Depositar Dinero</button>
                    <button id="withdrawMoneyBtn" class="btn-primary">Retirar Dinero</button>
                    <button id="transferMoneyBtn" class="btn-primary">Transferir Dinero</button>
                    <button id="receiveExternalMoneyBtn" class="btn-primary">Recibir Dinero Exterior</button> <!-- NUEVO BOTÓN -->
                    <button id="viewHistoryBtn" class="btn-primary">Ver Historial</button>
                    <button id="openSavingsAccountBtn" class="btn-primary">Abrir Cuenta de Ahorro</button>
                    <button id="viewSavingsAccountsBtn" class="btn-primary">Ver Cuentas de Ahorro</button>
                    <button id="viewSavingsDebtsBtn" class="btn-primary">Ver Mis Deudas de Ahorro</button>
                    <button id="onlineShoppingBtn" class="btn-primary">Compras en Línea</button>
                    <button id="streamingPaymentBtn" class="btn-primary">Pago de Streaming</button>
                    <button id="gameRechargeBtn" class="btn-primary">Recarga de Juegos</button>
                    <button id="viewUserPendingRequestsBtn" class="btn-primary">Mis Solicitudes Pendientes</button>
                    <button id="editProfileBtn" class="btn-secondary">Editar Perfil</button>
                    <button id="changePasswordBtn" class="btn-secondary">Cambiar Contraseña</button>
                    <button id="securityTipsBtn" class="btn-secondary">Consejos de Seguridad</button>
                    <button id="aboutUsBtn" class="btn-secondary">Acerca de Nosotros</button>
                    <button id="contactSupportBtn" class="btn-secondary">Contacto y Soporte</button>
                </div>

                <!-- Admin Specific Buttons (Hidden by default) -->
                <div id="adminButtonsContainer" class="hidden mt-6 pt-4 border-t border-gray-200">
                    <h3 class="text-xl font-bold text-blue-700 mb-4 text-center">Funciones de Administrador</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <button id="adminFullHistoryBtn" class="btn-danger">Ver Historial Completo</button>
                        <button id="viewAdminPendingRequestsBtn" class="btn-danger">Ver Solicitudes Pendientes</button>
                        <button id="editAnnouncementsBtn" class="btn-danger">Editar Anuncios</button>
                        <button id="viewAdminSavingsDebtsBtn" class="btn-danger">Ver Deudas de Ahorro (Admin)</button>
                    </div>
                </div>

                <button id="logoutBtn" class="btn-secondary w-full mt-6">Cerrar Sesión</button>
            </div>
        </div>
    </div>

    <!-- Message Box -->
    <div id="messageBox" class="message-box hidden">
        <span id="messageText"></span>
        <button id="closeMessage" class="close-btn">×</button>
    </div>

    <!-- Transaction Status Message (for transfers) -->
    <div id="transactionStatusMsg" class="transaction-status-msg hidden">
        <span id="transactionStatusText"></span>
        <button id="cancelOngoingTransferBtn" class="btn-danger btn-sm hidden">Cancelar</button>
    </div>

    <!-- Modals -->

    <!-- Rules Consent Modal -->
    <div id="rulesConsentModal" class="modal hidden">
        <div class="modal-content">
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Reglas y Términos de Servicio</h2>
            <div id="briefRulesTextContainer" class="text-gray-700 mb-6 max-h-60 overflow-y-auto pr-2">
                <!-- Rules text will be inserted here by JS -->
            </div>
            <div class="flex justify-end space-x-4">
                <button id="rejectRulesBtn" class="btn-danger">Rechazar</button>
                <button id="acceptRulesBtn" class="btn-success">Aceptar</button>
            </div>
        </div>
    </div>

    <!-- Transfer Money Modal -->
    <div id="transferModal" class="modal hidden">
        <div class="modal-content">
            <button id="cancelTransferModalBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Transferir Dinero</h2>
            <form id="transferForm" class="flex flex-col">
                <label for="transferRecipientId" class="text-gray-700 font-medium mb-1">ID de Destinatario (Email, ID de Usuario o UID):</label>
                <input type="text" id="transferRecipientId" class="input-field" placeholder="ej. usuario@banco.com o AB#1234" required>
                <p id="recipientNameDisplay" class="text-sm text-gray-600 mb-2"></p>

                <label for="transferAmount" class="text-gray-700 font-medium mb-1">Monto:</label>
                <input type="number" id="transferAmount" class="input-field" step="0.01" min="0.01" required>

                <label for="transferCurrency" class="text-gray-700 font-medium mb-1">Moneda:</label>
                <select id="transferCurrency" class="input-field" required>
                    <option value="USD">USD</option>
                    <option value="DOP">DOP</option>
                </select>

                <button type="submit" id="confirmTransferBtn" class="btn-primary w-full mt-4">Confirmar Transferencia</button>
            </form>
        </div>
    </div>

    <!-- Deposit Money Modal -->
    <div id="depositModal" class="modal hidden">
        <div class="modal-content">
            <button id="cancelDeposit" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Depositar Dinero</h2>
            <p class="text-gray-600 mb-4">Ingresa el número de serie de tu depósito físico y el monto. Esto enviará una solicitud de aprobación al banco.</p>
            <form id="depositForm" class="flex flex-col">
                <label for="depositSerialNumber" class="text-gray-700 font-medium mb-1">Número de Serie del Depósito:</label>
                <input type="text" id="depositSerialNumber" class="input-field" placeholder="Número de serie único" required>

                <label for="depositAmount" class="text-gray-700 font-medium mb-1">Monto:</label>
                <input type="number" id="depositAmount" class="input-field" step="0.01" min="0.01" required>

                <label for="depositCurrency" class="text-gray-700 font-medium mb-1">Moneda:</label>
                <select id="depositCurrency" class="input-field" required>
                    <option value="USD">USD</option>
                    <option value="DOP">DOP</option>
                </select>

                <button type="submit" class="btn-primary w-full mt-4">Enviar Solicitud de Depósito</button>
            </form>
        </div>
    </div>

    <!-- Receive External Money Modal (NUEVO) -->
    <div id="receiveExternalMoneyModal" class="modal hidden">
        <div class="modal-content">
            <button id="cancelReceiveExternalMoneyBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Recibir Dinero de Banco Exterior</h2>
            <p class="text-gray-600 mb-4">Ingresa los detalles del dinero que esperas recibir de un banco exterior. Esto enviará una solicitud de aprobación al administrador.</p>
            <form id="receiveExternalMoneyForm" class="flex flex-col">
                <label for="externalSenderName" class="text-gray-700 font-medium mb-1">Nombre del Remitente:</label>
                <input type="text" id="externalSenderName" class="input-field" placeholder="Nombre de quien envía el dinero" required>

                <label for="externalSenderBank" class="text-gray-700 font-medium mb-1">Banco Origen:</label>
                <input type="text" id="externalSenderBank" class="input-field" placeholder="Nombre del banco de origen" required>

                <label for="externalSerialNumber" class="text-gray-700 font-medium mb-1">Número de Serie/Referencia de la Transacción:</label>
                <input type="text" id="externalSerialNumber" class="input-field" placeholder="Número de referencia de la transacción" required>

                <label for="externalDepositAmount" class="text-gray-700 font-medium mb-1">Monto a Recibir:</label>
                <input type="number" id="externalDepositAmount" class="input-field" step="0.01" min="0.01" required>

                <label for="externalDepositCurrency" class="text-gray-700 font-medium mb-1">Moneda:</label>
                <select id="externalDepositCurrency" class="input-field" required>
                    <option value="USD">USD</option>
                    <option value="DOP">DOP</option>
                </select>

                <button type="submit" class="btn-primary w-full mt-4">Enviar Solicitud de Recepción</button>
            </form>
        </div>
    </div>

    <!-- Withdraw Money Modal -->
    <div id="withdrawModal" class="modal hidden">
        <div class="modal-content">
            <button id="cancelWithdraw" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Retirar Dinero</h2>
            <p class="text-gray-600 mb-4">Ingresa el monto que deseas retirar. Se aplicará una tarifa del 4%.</p>
            <form id="withdrawForm" class="flex flex-col">
                <label for="withdrawAmount" class="text-gray-700 font-medium mb-1">Monto:</label>
                <input type="number" id="withdrawAmount" class="input-field" step="0.01" min="0.01" required>

                <label for="withdrawCurrency" class="text-gray-700 font-medium mb-1">Moneda:</label>
                <select id="withdrawCurrency" class="input-field" required>
                    <option value="USD">USD</option>
                    <option value="DOP">DOP</option>
                </select>

                <button type="submit" class="btn-primary w-full mt-4">Enviar Solicitud de Retiro</button>
            </form>
        </div>
    </div>

    <!-- User History Modal -->
    <div id="userHistoryModal" class="modal hidden">
        <div class="modal-content">
            <button id="closeUserHistoryModalBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Mi Historial de Transacciones</h2>
            <div class="table-container">
                <table class="min-w-full bg-white rounded-lg shadow-md">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Tipo</th>
                            <th>Monto</th>
                            <th>Moneda</th>
                            <th>Detalles</th>
                            <th>Recibo</th>
                        </tr>
                    </thead>
                    <tbody id="userHistoryTableBody">
                        <!-- Transaction rows will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Admin Full History Modal -->
    <div id="adminFullHistoryModal" class="modal hidden">
        <div class="modal-content">
            <button id="closeAdminFullHistoryModalBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Historial Completo de Transacciones (Admin)</h2>
            <div class="table-container">
                <table class="min-w-full bg-white rounded-lg shadow-md">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Tipo</th>
                            <th>Usuarios Involucrados</th>
                            <th>Monto</th>
                            <th>Moneda</th>
                            <th>Detalles</th>
                            <th>Recibo</th>
                        </tr>
                    </thead>
                    <tbody id="adminFullHistoryTableBodyModal">
                        <!-- Transaction rows will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Admin Pending Requests Modal -->
    <div id="adminPendingRequestsModal" class="modal hidden">
        <div class="modal-content">
            <button id="closeAdminPendingRequestsModalBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Solicitudes Pendientes (Admin)</h2>
            <div class="table-container">
                <table class="min-w-full bg-white rounded-lg shadow-md">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Tipo</th>
                            <th>Usuario</th>
                            <th>Monto</th>
                            <th>Moneda</th>
                            <th>Detalles</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="adminPendingRequestsTableBody">
                        <!-- Pending request rows will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- FAQ Modal -->
    <div id="faqModal" class="modal hidden">
        <div class="modal-content">
            <button id="closeFAQModalBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Preguntas Frecuentes</h2>
            <div class="text-gray-700">
                <h3 class="text-xl font-semibold mb-2">¿Cómo deposito dinero?</h3>
                <p class="mb-4">Puedes depositar dinero en efectivo en cualquiera de nuestras sucursales. Te proporcionaremos un número de serie que deberás ingresar en la aplicación para que tu depósito sea aprobado por el banco.</p>

                <h3 class="text-xl font-semibold mb-2">¿Cómo retiro dinero?</h3>
                <p class="mb-4">Puedes solicitar un retiro a través de la aplicación. Una vez aprobado por el banco, podrás recoger el dinero en una sucursal. Se aplica una tarifa del 4%.</p>

                <h3 class="text-xl font-semibold mb-2">¿Puedo transferir dinero a otros usuarios?</h3>
                <p class="mb-4">Sí, puedes transferir dinero a otros usuarios de Banco Juvenil utilizando su email, ID de usuario o UID. Las transferencias tardan 10 segundos en procesarse.</p>

                <h3 class="text-xl font-semibold mb-2">¿Qué son las cuentas de ahorro?</h3>
                <p class="mb-4">Las cuentas de ahorro te permiten establecer metas y contribuir periódicamente. Puedes elegir la frecuencia de tus contribuciones. Las solicitudes de apertura y eliminación requieren aprobación.</p>

                <h3 class="text-xl font-semibold mb-2">¿Qué sucede si no pago mi cuota de ahorro automática?</h3>
                <p class="mb-4">Si no tienes fondos suficientes para una contribución automática, se registrará una deuda. Si esta deuda no se paga a tiempo, se aplicará una indemnización del 5% del monto adeudado, que se transferirá al administrador.</p>

                <h3 class="text-xl font-semibold mb-2">¿Puedo hacer compras en línea o pagar servicios de streaming?</h3>
                <p class="mb-4">Sí, puedes solicitar compras en línea o pagos de servicios de streaming a través de la aplicación. Estas solicitudes requieren la aprobación del administrador y se aplica una comisión del 3%.</p>

                <h3 class="text-xl font-semibold mb-2">¿Qué es una recarga de juegos?</h3>
                <p class="mb-4">Puedes solicitar recargas para tus juegos favoritos a través de la aplicación. Estas solicitudes también requieren la aprobación del administrador y se aplica una comisión del 3%.</p>

                <h3 class="text-xl font-semibold mb-2">¿Cómo contacto al soporte?</h3>
                <p class="mb-4">Puedes contactarnos a través del botón "Contacto y Soporte" en el panel de control. Te proporcionaremos un número de WhatsApp para asistencia directa.</p>
            </div>
        </div>
    </div>

    <!-- Online Shopping Modal -->
    <div id="onlineShoppingModal" class="modal hidden">
        <div class="modal-content">
            <button id="cancelOnlineShopping" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Solicitar Compra en Línea</h2>
            <p class="text-gray-600 mb-4">Ingresa el monto estimado de tu compra y los enlaces de los productos. Se aplicará una comisión del 3%.</p>
            <form id="onlineShoppingForm" class="flex flex-col">
                <label for="shoppingAmount" class="text-gray-700 font-medium mb-1">Monto Estimado de Productos:</label>
                <input type="number" id="shoppingAmount" class="input-field" step="0.01" min="0.01" required>

                <label for="shoppingCurrency" class="text-gray-700 font-medium mb-1">Moneda del Monto Estimado:</label>
                <select id="shoppingCurrency" class="input-field" required>
                    <option value="USD">USD</option>
                    <option value="DOP">DOP</option>
                </select>

                <label for="shoppingCategory" class="text-gray-700 font-medium mb-1">Categoría de la Compra:</label>
                <select id="shoppingCategory" class="input-field" required>
                    <option value="">Selecciona una categoría</option>
                    <option value="Ropa y Accesorios">Ropa y Accesorios</option>
                    <option value="Electrónica">Electrónica</option>
                    <option value="Libros y Material Educativo">Libros y Material Educativo</option>
                    <option value="Juguetes y Juegos">Juguetes y Juegos</option>
                    <option value="Artículos para el Hogar">Artículos para el Hogar</option>
                    <option value="Salud y Belleza">Salud y Belleza</option>
                    <option value="Entretenimiento">Entretenimiento</option>
                    <option value="Otros">Otros</option>
                </select>

                <label for="productLinks" class="text-gray-700 font-medium mb-1">Enlaces de los Productos (uno por línea):</label>
                <textarea id="productLinks" class="input-field h-32 resize-y" placeholder="https://ejemplo.com/producto1&#10;https://ejemplo.com/producto2" required></textarea>

                <p class="text-gray-700 mt-2">Tarifa (3%): <span id="shoppingFeeDisplay" class="font-semibold text-blue-700">$0.00 USD</span></p>
                <p class="text-gray-700">Total a Deducir (aprox.): <span id="shoppingTotalDisplay" class="font-semibold text-blue-700">$0.00 USD</span></p>

                <button type="submit" class="btn-primary w-full mt-4">Enviar Solicitud de Compra</button>
            </form>
        </div>
    </div>

    <!-- Streaming Payment Modal -->
    <div id="streamingPaymentModal" class="modal hidden">
        <div class="modal-content">
            <button id="cancelStreamingPayment" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Solicitar Pago de Servicio de Streaming</h2>
            <p class="text-gray-600 mb-4">Ingresa los detalles de tu servicio de streaming. Se aplicará una comisión del 3%.</p>
            <form id="streamingPaymentForm" class="flex flex-col">
                <label for="streamingService" class="text-gray-700 font-medium mb-1">Servicio de Streaming:</label>
                <select id="streamingService" class="input-field" required>
                    <option value="">Selecciona un servicio</option>
                    <option value="Netflix">Netflix</option>
                    <option value="Disney+">Disney+</option>
                    <option value="HBO Max">HBO Max</option>
                    <option value="Spotify">Spotify</option>
                    <option value="Apple Music">Apple Music</option>
                    <option value="YouTube Premium">YouTube Premium</option>
                    <option value="Amazon Prime Video">Amazon Prime Video</option>
                    <option value="Otros">Otros</option>
                </select>

                <label for="streamingAccountIdentifier" class="text-gray-700 font-medium mb-1">Identificador de Cuenta (Email o Nombre de Usuario):</label>
                <input type="text" id="streamingAccountIdentifier" class="input-field" placeholder="Email o nombre de usuario de tu cuenta" required>

                <label for="streamingAmount" class="text-gray-700 font-medium mb-1">Monto de la Suscripción:</label>
                <input type="number" id="streamingAmount" class="input-field" step="0.01" min="0.01" required>

                <label for="streamingCurrency" class="text-gray-700 font-medium mb-1">Moneda de la Suscripción:</label>
                <select id="streamingCurrency" class="input-field" required>
                    <option value="USD">USD</option>
                    <option value="DOP">DOP</option>
                </select>

                <label for="streamingCategory" class="text-gray-700 font-medium mb-1">Tipo de Servicio:</label>
                <select id="streamingCategory" class="input-field" required>
                    <option value="">Selecciona un tipo</option>
                    <option value="Video">Video</option>
                    <option value="Música">Música</option>
                    <option value="Juegos">Juegos</option>
                    <option value="Educación">Educación</option>
                    <option value="Otros">Otros</option>
                </select>

                <p class="text-gray-700 mt-2">Tarifa (3%): <span id="streamingFeeDisplay" class="font-semibold text-blue-700">$0.00 USD</span></p>
                <p class="text-gray-700">Total a Deducir (aprox.): <span id="streamingTotalDisplay" class="font-semibold text-blue-700">$0.00 USD</span></p>

                <button type="submit" class="btn-primary w-full mt-4">Enviar Solicitud de Pago</button>
            </form>
        </div>
    </div>

    <!-- Game Recharge Modal -->
    <div id="gameRechargeModal" class="modal hidden">
        <div class="modal-content">
            <button id="cancelGameRecharge" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Solicitar Recarga de Juego</h2>
            <p class="text-gray-600 mb-4">Ingresa los detalles para la recarga de tu juego. Se aplicará una comisión del 3%.</p>
            <form id="gameRechargeForm" class="flex flex-col">
                <label for="gameName" class="text-gray-700 font-medium mb-1">Nombre del Juego:</label>
                <input type="text" id="gameName" class="input-field" placeholder="ej. Free Fire, Roblox" required>

                <label for="playerId" class="text-gray-700 font-medium mb-1">ID de Jugador:</label>
                <input type="text" id="playerId" class="input-field" placeholder="Tu ID de jugador en el juego" required>

                <label for="rechargeAmount" class="text-gray-700 font-medium mb-1">Monto de la Recarga:</label>
                <input type="number" id="rechargeAmount" class="input-field" step="0.01" min="0.01" required>

                <label for="rechargeCurrency" class="text-gray-700 font-medium mb-1">Moneda de la Recarga:</label>
                <select id="rechargeCurrency" class="input-field" required>
                    <option value="USD">USD</option>
                    <option value="DOP">DOP</option>
                </select>

                <label for="gameRechargeCategory" class="text-gray-700 font-medium mb-1">Tipo de Recarga:</label>
                <select id="gameRechargeCategory" class="input-field" required>
                    <option value="">Selecciona un tipo</option>
                    <option value="Diamantes">Diamantes</option>
                    <option value="Monedas">Monedas</option>
                    <option value="Paquete">Paquete</option>
                    <option value="Pase de Batalla">Pase de Batalla</option>
                    <option value="Otros">Otros</option>
                </select>

                <p class="text-gray-700 mt-2">Tarifa (3%): <span id="gameRechargeFeeDisplay" class="font-semibold text-blue-700">$0.00 USD</span></p>
                <p class="text-gray-700">Total a Deducir (aprox.): <span id="gameRechargeTotalDisplay" class="font-semibold text-blue-700">$0.00 USD</span></p>

                <button type="submit" class="btn-primary w-full mt-4">Enviar Solicitud de Recarga</button>
            </form>
        </div>
    </div>

    <!-- User Pending Requests Modal -->
    <div id="userPendingRequestsModal" class="modal hidden">
        <div class="modal-content">
            <button id="closeUserPendingRequestsModalBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Mis Solicitudes Pendientes</h2>
            <div class="table-container">
                <table class="min-w-full bg-white rounded-lg shadow-md">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Tipo</th>
                            <th>Monto</th>
                            <th>Moneda</th>
                            <th>Detalle</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody id="userPendingRequestsTableBody">
                        <!-- User pending request rows will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Receipt Modal -->
    <div id="receiptModal" class="modal hidden">
        <div class="modal-content">
            <button id="closeReceiptModalBtn" class="close-btn">×</button>
            <div id="receiptContent" class="text-gray-800">
                <!-- Receipt content will be generated by JS -->
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div id="editProfileModal" class="modal hidden">
        <div class="modal-content">
            <button id="cancelEditProfileBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Editar Perfil</h2>
            <form id="editProfileForm" class="flex flex-col">
                <label for="editName" class="text-gray-700 font-medium mb-1">Nombre:</label>
                <input type="text" id="editName" class="input-field" required>

                <label for="editSurname" class="text-gray-700 font-medium mb-1">Apellido:</label>
                <input type="text" id="editSurname" class="input-field" required>

                <label for="editAge" class="text-gray-700 font-medium mb-1">Edad:</label>
                <input type="number" id="editAge" class="input-field" required min="13">

                <label for="editPhoneNumber" class="text-gray-700 font-medium mb-1">Número de Teléfono (WhatsApp):</label>
                <input type="tel" id="editPhoneNumber" class="input-field" placeholder="ej. 18091234567" required>

                <button type="submit" class="btn-primary w-full mt-4">Guardar Cambios</button>
            </form>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div id="changePasswordModal" class="modal hidden">
        <div class="modal-content">
            <button id="cancelChangePasswordBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Cambiar Contraseña</h2>
            <form id="changePasswordForm" class="flex flex-col">
                <label for="currentPassword" class="text-gray-700 font-medium mb-1">Contraseña Actual:</label>
                <input type="password" id="currentPassword" class="input-field" required>

                <label for="newPassword" class="text-gray-700 font-medium mb-1">Nueva Contraseña:</label>
                <input type="password" id="newPassword" class="input-field" required minlength="6">

                <label for="confirmNewPassword" class="text-gray-700 font-medium mb-1">Confirmar Nueva Contraseña:</label>
                <input type="password" id="confirmNewPassword" class="input-field" required>

                <button type="submit" class="btn-primary w-full mt-4">Cambiar Contraseña</button>
            </form>
        </div>
    </div>

    <!-- Security Tips Modal -->
    <div id="securityTipsModal" class="modal hidden">
        <div class="modal-content">
            <button id="closeSecurityTipsBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Consejos de Seguridad</h2>
            <div class="text-gray-700">
                <ul class="list-disc list-inside">
                    <li class="mb-2">Usa contraseñas fuertes y únicas para tu cuenta.</li>
                    <li class="mb-2">Nunca compartas tu contraseña con nadie.</li>
                    <li class="mb-2">Ten cuidado con correos electrónicos o mensajes sospechosos que soliciten tu información personal.</li>
                    <li class="mb-2">Verifica siempre la URL del sitio web antes de ingresar tus credenciales.</li>
                    <li class="mb-2">Cierra sesión de tu cuenta cuando uses un dispositivo compartido o público.</li>
                    <li class="mb-2">Mantén tu software y navegador actualizados.</li>
                    <li class="mb-2">Reporta cualquier actividad sospechosa al soporte de inmediato.</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- About Us Modal -->
    <div id="aboutUsModal" class="modal hidden">
        <div class="modal-content">
            <button id="closeAboutUsBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Acerca de Banco Juvenil</h2>
            <div class="text-gray-700">
                <p class="mb-4">Banco Juvenil es una plataforma diseñada para ayudar a los jóvenes a aprender sobre la gestión financiera de una manera segura y controlada. Nuestro objetivo es fomentar hábitos de ahorro, responsabilidad en el gasto y comprensión de los servicios bancarios básicos.</p>
                <p class="mb-4">Creemos que la educación financiera temprana es clave para construir un futuro sólido. Con Banco Juvenil, los jóvenes pueden experimentar transacciones, ahorros y presupuestos en un entorno simulado, preparándolos para el mundo financiero real.</p>
                <p class="mb-4">¡Gracias por ser parte de nuestra comunidad!</p>
            </div>
        </div>
    </div>

    <!-- Contact Support Modal -->
    <div id="contactSupportModal" class="modal hidden">
        <div class="modal-content">
            <button id="closeContactSupportBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Contacto y Soporte</h2>
            <div class="text-gray-700">
                <p class="mb-4">Si tienes alguna pregunta, problema o necesitas asistencia, no dudes en contactarnos. Estamos aquí para ayudarte.</p>
                <p class="mb-2">Puedes enviarnos un mensaje directo a nuestro número de WhatsApp:</p>
                <p class="text-lg font-bold text-green-600 mb-4">
                    <a href="https://wa.me/18293329545" target="_blank" class="hover:underline">WhatsApp: +1 (829) 332-9545</a>
                </p>
                <p class="mb-4">Nuestro equipo de soporte está disponible para responder a tus consultas y brindarte la ayuda que necesites.</p>
            </div>
        </div>
    </div>

    <!-- Open Savings Account Modal -->
    <div id="openSavingsAccountModal" class="modal hidden">
        <div class="modal-content">
            <button id="cancelOpenSavingsAccountBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Abrir Nueva Cuenta de Ahorro</h2>
            <p class="text-gray-600 mb-4">Establece una meta de ahorro y cómo te gustaría contribuir a ella.</p>
            <form id="savingsAccountForm" class="flex flex-col">
                <label for="savingsGoal" class="text-gray-700 font-medium mb-1">Meta de Ahorro (ej. "Para mi nueva PC", "Viaje a la playa"):</label>
                <input type="text" id="savingsGoal" class="input-field" placeholder="Mi objetivo de ahorro" required>

                <label for="initialDepositAmount" class="text-gray-700 font-medium mb-1">Monto de Depósito Inicial:</label>
                <input type="number" id="initialDepositAmount" class="input-field" step="0.01" min="0.01" required>

                <label for="initialDepositCurrency" class="text-gray-700 font-medium mb-1">Moneda del Depósito Inicial:</label>
                <select id="initialDepositCurrency" class="input-field" required>
                    <option value="USD">USD</option>
                    <option value="DOP">DOP</option>
                </select>

                <label for="preferredSavingsFrequency" class="text-gray-700 font-medium mb-1">Frecuencia de Contribución Preferida:</label>
                <select id="preferredSavingsFrequency" class="input-field" required>
                    <option value="Ocasional">Ocasional (sin contribuciones automáticas)</option>
                    <option value="Diaria">Diaria</option>
                    <option value="Semanal">Semanal</option>
                    <option value="Quincenal">Quincenal</option>
                    <option value="Mensual">Mensual</option>
                </select>

                <label for="periodicContributionAmount" class="text-gray-700 font-medium mb-1">Monto de Contribución Periódica (USD):</label>
                <input type="number" id="periodicContributionAmount" class="input-field" step="0.01" min="0" placeholder="0.00" required>

                <label for="savingsEndDate" class="text-gray-700 font-medium mb-1">Fecha de Finalización de la Meta:</label>
                <input type="date" id="savingsEndDate" class="input-field" required>

                <button type="submit" class="btn-primary w-full mt-4">Enviar Solicitud de Apertura</button>
            </form>
        </div>
    </div>

    <!-- View Savings Accounts Modal -->
    <div id="viewSavingsAccountsModal" class="modal hidden">
        <div class="modal-content">
            <button id="closeViewSavingsAccountsBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Mis Cuentas de Ahorro</h2>
            <div class="table-container">
                <table class="min-w-full bg-white rounded-lg shadow-md">
                    <thead>
                        <tr>
                            <th>Meta</th>
                            <th>Saldo USD</th>
                            <th>Frecuencia</th>
                            <th>Cuota Periódica</th>
                            <th>Próxima Cuota</th>
                            <th>Fecha Fin</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="savingsAccountsTableBody">
                        <!-- Savings account rows will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Edit Announcements Modal (Admin Only) -->
    <div id="editAnnouncementsModal" class="modal hidden">
        <div class="modal-content">
            <button id="cancelEditAnnouncementsBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Editar Anuncios (Admin)</h2>
            <p class="text-gray-600 mb-4">Ingresa cada anuncio en una línea separada. Se mostrarán en el panel de control de todos los usuarios.</p>
            <form id="editAnnouncementsForm" class="flex flex-col">
                <label for="announcementsTextarea" class="text-gray-700 font-medium mb-1">Anuncios:</label>
                <textarea id="announcementsTextarea" class="input-field h-48 resize-y" placeholder="Anuncio 1&#10;Anuncio 2&#10;Anuncio 3"></textarea>
                <button type="submit" class="btn-primary w-full mt-4">Guardar Anuncios</button>
            </form>
        </div>
    </div>

    <!-- Deposit to Savings Modal -->
    <div id="depositToSavingsModal" class="modal hidden">
        <div class="modal-content">
            <button id="cancelDepositToSavingsBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Depositar a Cuenta de Ahorro</h2>
            <p class="text-gray-600 mb-2">Cuenta: <span id="depositToSavingsAccountIdDisplay" class="font-semibold"></span></p>
            <p class="text-gray-600 mb-4">Transfiere dinero de tu cuenta principal a esta cuenta de ahorro.</p>
            <form id="depositToSavingsForm" class="flex flex-col">
                <label for="depositToSavingsAmount" class="text-gray-700 font-medium mb-1">Monto a Depositar:</label>
                <input type="number" id="depositToSavingsAmount" class="input-field" step="0.01" min="0.01" required>

                <label for="depositToSavingsCurrency" class="text-gray-700 font-medium mb-1">Moneda:</label>
                <select id="depositToSavingsCurrency" class="input-field" required>
                    <option value="USD">USD</option>
                    <option value="DOP">DOP</option>
                </select>

                <button type="submit" class="btn-primary w-full mt-4">Confirmar Depósito</button>
            </form>
        </div>
    </div>

    <!-- Withdraw from Savings Modal -->
    <div id="withdrawFromSavingsModal" class="modal hidden">
        <div class="modal-content">
            <button id="cancelWithdrawFromSavingsBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Retirar de Cuenta de Ahorro</h2>
            <p class="text-gray-600 mb-2">Cuenta: <span id="withdrawFromSavingsAccountIdDisplay" class="font-semibold"></span></p>
            <p class="text-gray-600 mb-4">Transfiere dinero de esta cuenta de ahorro a tu cuenta principal.</p>
            <form id="withdrawFromSavingsForm" class="flex flex-col">
                <label for="withdrawFromSavingsAmount" class="text-gray-700 font-medium mb-1">Monto a Retirar:</label>
                <input type="number" id="withdrawFromSavingsAmount" class="input-field" step="0.01" min="0.01" required>

                <label for="withdrawFromSavingsCurrency" class="text-gray-700 font-medium mb-1">Moneda:</label>
                <select id="withdrawFromSavingsCurrency" class="input-field" required>
                    <option value="USD">USD</option>
                    <option value="DOP">DOP</option>
                </select>

                <button type="submit" class="btn-primary w-full mt-4">Confirmar Retiro</button>
            </form>
        </div>
    </div>

    <!-- Confirm Delete Savings Account Modal -->
    <div id="confirmDeleteSavingsAccountModal" class="modal hidden">
        <div class="modal-content">
            <button id="cancelDeleteSavingsAccountBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-red-700 mb-4">Confirmar Eliminación de Cuenta de Ahorro</h2>
            <p class="text-gray-700 mb-2">¿Estás seguro de que deseas eliminar la cuenta de ahorro para "<span id="deleteSavingsAccountGoalDisplay" class="font-semibold"></span>"?</p>
            <p class="text-gray-700 mb-2">Se aplicará una tarifa del 2% sobre el saldo restante de la cuenta.</p>
            <p class="text-gray-700 mb-2">Tarifa de Eliminación: <span id="deleteSavingsAccountFeeDisplay" class="font-semibold text-red-600"></span></p>
            <p class="text-gray-700 mb-4">Saldo Restante a Transferir a tu Cuenta Principal: <span id="deleteSavingsAccountRemainingDisplay" class="font-semibold text-blue-700"></span></p>
            <div class="flex justify-end space-x-4">
                <button id="cancelDeleteSavingsAccountBtn2" class="btn-secondary">Cancelar</button>
                <button id="confirmDeleteSavingsAccountBtn" class="btn-danger">Eliminar Cuenta</button>
            </div>
        </div>
    </div>

    <!-- Savings Debts Modal (Client) -->
    <div id="savingsDebtsModal" class="modal hidden">
        <div class="modal-content">
            <button id="closeSavingsDebtsModalBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Mis Deudas de Ahorro Pendientes</h2>
            <div class="table-container">
                <table class="min-w-full bg-white rounded-lg shadow-md">
                    <thead>
                        <tr>
                            <th>Cuenta de Ahorro</th>
                            <th>Monto Adeudado</th>
                            <th>Indemnización</th>
                            <th>Total a Pagar</th>
                            <th>Fecha de Vencimiento</th>
                            <th>Acción</th>
                        </tr>
                    </thead>
                    <tbody id="savingsDebtsTableBody">
                        <!-- Savings debt rows for client will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Admin Savings Debts Modal -->
    <div id="adminSavingsDebtsModal" class="modal hidden">
        <div class="modal-content">
            <button id="closeAdminSavingsDebtsModalBtn" class="close-btn">×</button>
            <h2 class="text-2xl font-bold text-blue-700 mb-4">Deudas de Ahorro (Administrador)</h2>
            <div class="table-container">
                <table class="min-w-full bg-white rounded-lg shadow-md">
                    <thead>
                        <tr>
                            <th>Usuario</th>
                            <th>Cuenta de Ahorro</th>
                            <th>Monto Adeudado</th>
                            <th>Indemnización</th>
                            <th>Total a Pagar</th>
                            <th>Fecha de Vencimiento</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody id="adminSavingsDebtsTableBody">
                        <!-- Admin savings debt rows will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Main JavaScript file -->
    <script type="module" src="./script.js"></script>
</body>
</html>
